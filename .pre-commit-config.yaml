repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v6.0.0
    hooks:
      - id: trailing-whitespace
      - id: end-of-file-fixer
      - id: check-yaml
      - id: check-merge-conflict
      - id: check-executables-have-shebangs
      - id: check-shebang-scripts-are-executable

  - repo: local
    hooks:
      - id: shellcheck
        name: Shellcheck
        entry: shellcheck
        language: system
        files: \.(sh|bash|zsh)$|^(shell/profile|bin/|install)$
        exclude: antidote/.*\.zsh$
        args: [-x, -e, "SC1090,SC1091", --severity=warning]

      - id: stylua
        name: StyLua formatter
        entry: stylua
        language: system
        files: \.lua$

      - id: dotfiles-test
        name: Test dotfiles configuration
        entry: ./tests/shell.sh
        language: script
        pass_filenames: false
        files: ^(shell/|antidote/).*$
        description: Verify shell configs source cleanly
