#
# Executes commands at the start of an interactive session.
#

# Source profile.
[[ -e ~/dotfiles/shell/profile ]] && emulate sh -c 'source ~/dotfiles/shell/profile'

# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

setopt HIST_IGNORE_SPACE
export HISTSIZE=100000
export SAVEHIST=100000
export HISTFILE=~/.zhistory
[[ -z "$TMPDIR" ]] && TMPDIR=/tmp

# Source 'fzf'.
[[ -f ~/.fzf.zsh ]] && source ~/.fzf.zsh

# AWS CLI completion (assumes awscli installed by Homebrew).
source /usr/local/share/zsh/site-functions/_aws

# Since it's provided by our prompt.
export VIRTUAL_ENV_DISABLE_PROMPT=1

# Configure opam
test -r /Users/mattwestcott/.opam/opam-init/init.zsh && . /Users/mattwestcott/.opam/opam-init/init.zsh > /dev/null 2> /dev/null || true

# Spaceship prompt
SPACESHIP_PROMPT_ADD_NEWLINE="true"
SPACESHIP_PROMPT_SEPARATE_LINE="true"


# Spaceship prompt
SPACESHIP_PROMPT_ORDER=(
    time          # Time stamps section
    user          # Username section
    host          # Hostname section
    dir           # Current directory section
    aws           # Amazon Web Services section
    git           # Git section (git_branch + git_status)
    venv          # virtualenv section
    line_sep      # Line break
    exit_code     # Exit code section
    jobs          # Background jobs indicator
    char          # Prompt character
)

SPACESHIP_RPROMPT_ORDER=()

# CHAR
SPACESHIP_CHAR_SYMBOL="‚ùØ"
SPACESHIP_CHAR_SUFFIX=" "
SPACESHIP_CHAR_COLOR_SUCCESS="green"
SPACESHIP_CHAR_COLOR_FAILURE="red"

# TIME
SPACESHIP_TIME_SHOW="false"
SPACESHIP_TIME_PREFIX=""
SPACESHIP_TIME_COLOR="246"

# USER
SPACESHIP_USER_PREFIX=""
SPACESHIP_USER_SUFFIX=""

# HOST
SPACESHIP_HOST_PREFIX="@"
SPACESHIP_HOST_SUFFIX=" "

# DIR
SPACESHIP_DIR_PREFIX=""
SPACESHIP_DIR_TRUNC="0"
SPACESHIP_DIR_TRUNC_REPO="false"
SPACESHIP_DIR_COLOR="white"

# GIT
SPACESHIP_GIT_SYMBOL=""
SPACESHIP_GIT_BRANCH_PREFIX=""
SPACESHIP_GIT_BRANCH_COLOR="blue"
SPACESHIP_GIT_PREFIX=""
SPACESHIP_GIT_SUFFIX=" "
SPACESHIP_GIT_BRANCH_SUFFIX=""
SPACESHIP_GIT_STATUS_PREFIX=""
SPACESHIP_GIT_STATUS_SUFFIX=""
SPACESHIP_GIT_STATUS_COLOR="yellow"

# VENV
SPACESHIP_VENV_PREFIX=""
SPACESHIP_VENV_SUFFIX=" "
SPACESHIP_VENV_COLOR="green"

# AWS
SPACESHIP_AWS_PREFIX=""
SPACESHIP_AWS_SUFFIX=" "
SPACESHIP_AWS_SYMBOL=""
SPACESHIP_AWS_COLOR="red"
